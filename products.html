<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products - Dinhata Buzzer Hub</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="top-header">
            <div class="logo">
                <i class="fas fa-bolt logo-icon"></i>
                <h1>Dinhata <span>Buzzer Hub</span></h1>
            </div>
            
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Search for products, brands and more">
                <button onclick="searchProducts()"><i class="fas fa-search"></i></button>
            </div>
            
            <div class="user-actions">
                <div class="action-item" onclick="toggleLogin()">
                    <i class="fas fa-user"></i>
                    <span id="loginText">Login</span>
                </div>
                <div class="action-item" onclick="window.location.href='cart.html'">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Cart</span>
                    <div class="cart-count" id="headerCartCount">0</div>
                </div>
            </div>
        </div>
        
        <nav>
            <div class="nav-links">
                <a href="index.html"><i class="fas fa-home"></i> Home</a>
                <a href="products.html" class="active"><i class="fas fa-box"></i> Products</a>
                <a href="products.html?category=electronics"><i class="fas fa-mobile-alt"></i> Electronics</a>
                <a href="products.html?category=fashion"><i class="fas fa-tshirt"></i> Fashion</a>
                <a href="products.html?category=home"><i class="fas fa-home"></i> Home & Kitchen</a>
                <a href="products.html?category=grocery"><i class="fas fa-utensils"></i> Grocery</a>
            </div>
        </nav>
    </header>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeLogin()">&times;</span>
            <h2>Login to Dinhata Buzzer Hub</h2>
            <form id="loginForm">
                <input type="text" placeholder="Phone Number" required>
                <input type="password" placeholder="Password" required>
                <button type="submit">Login</button>
            </form>
            <p>New user? <a href="#" style="color: #2874f0;">Sign Up</a></p>
        </div>
    </div>

    <main class="products-page">
        <div class="products-header">
            <h2 id="pageTitle">All Products</h2>
            <div class="filter-section">
                <select id="categoryFilter" onchange="filterProducts()">
                    <option value="">All Categories</option>
                    <option value="electronics">Electronics</option>
                    <option value="fashion">Fashion</option>
                    <option value="home">Home & Kitchen</option>
                    <option value="grocery">Grocery</option>
                    <option value="beauty">Beauty</option>
                    <option value="sports">Sports</option>
                </select>
                <select id="sortFilter" onchange="sortProducts()">
                    <option value="default">Sort By</option>
                    <option value="price-low">Price: Low to High</option>
                    <option value="price-high">Price: High to Low</option>
                    <option value="name">Name</option>
                </select>
            </div>
        </div>

        <div class="product-grid" id="productsContainer">
            <!-- Products will load here -->
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-column">
                <h3>ABOUT</h3>
                <ul class="footer-links">
                    <li><a href="#">Contact Us</a></li>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Careers</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>HELP</h3>
                <ul class="footer-links">
                    <li><a href="#">Payments</a></li>
                    <li><a href="#">Shipping</a></li>
                    <li><a href="#">Returns</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>POLICY</h3>
                <ul class="footer-links">
                    <li><a href="#">Return Policy</a></li>
                    <li><a href="#">Terms Of Use</a></li>
                    <li><a href="#">Privacy</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>SOCIAL</h3>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2024 Dinhata Buzzer Hub. All rights reserved.</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        let allProducts = [];
        let filteredProducts = [];

        document.addEventListener('DOMContentLoaded', function() {
            updateCartCount();
            setupNavigation();
            loadAllProducts();
            
            // Check for URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const category = urlParams.get('category');
            const search = urlParams.get('search');
            
            if (category) {
                document.getElementById('categoryFilter').value = category;
                filterProducts();
                document.getElementById('pageTitle').textContent = category.charAt(0).toUpperCase() + category.slice(1) + ' Products';
            }
            
            if (search) {
                document.getElementById('searchInput').value = search;
                searchProducts();
            }
        });

        function loadAllProducts() {
            allProducts = getProducts();
            filteredProducts = [...allProducts];
            displayProducts(filteredProducts);
        }

        function displayProducts(products) {
            const container = document.getElementById('productsContainer');
            
            if (products.length === 0) {
                container.innerHTML = '<div class="no-products">No products found matching your criteria.</div>';
                return;
            }
            
            container.innerHTML = products.map(product => `
                <div class="product-card">
                    <img src="${product.img}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <div class="product-title">${product.name}</div>
                        <div class="product-rating">
                            <i class="fas fa-star"></i> ${product.rating || '4.0'}
                        </div>
                        <div class="product-price">
                            ₹${product.price} 
                            ${product.originalPrice ? `<span class="original-price">₹${product.originalPrice}</span>` : ''}
                            ${product.discount ? `<span class="discount">${product.discount}% off</span>` : ''}
                        </div>
                        <button class="add-to-cart" onclick="addToCart(${product.id})">
                            <i class="fas fa-shopping-cart"></i> Add to Cart
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function filterProducts() {
            const category = document.getElementById('categoryFilter').value;
            
            if (category) {
                filteredProducts = allProducts.filter(product => product.category === category);
            } else {
                filteredProducts = [...allProducts];
            }
            
            displayProducts(filteredProducts);
        }

        function sortProducts() {
            const sortBy = document.getElementById('sortFilter').value;
            
            switch(sortBy) {
                case 'price-low':
                    filteredProducts.sort((a, b) => a.price - b.price);
                    break;
                case 'price-high':
                    filteredProducts.sort((a, b) => b.price - a.price);
                    break;
                case 'name':
                    filteredProducts.sort((a, b) => a.name.localeCompare(b.name));
                    break;
                default:
                    filteredProducts = [...allProducts];
            }
            
            displayProducts(filteredProducts);
        }

        function searchProducts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            if (searchTerm.trim()) {
                filteredProducts = allProducts.filter(product => 
                    product.name.toLowerCase().includes(searchTerm) ||
                    product.category.toLowerCase().includes(searchTerm)
                );
                document.getElementById('pageTitle').textContent = `Search Results for "${searchTerm}"`;
            } else {
                filteredProducts = [...allProducts];
                document.getElementById('pageTitle').textContent = 'All Products';
            }
            
            displayProducts(filteredProducts);
        }

        function toggleLogin() {
            document.getElementById('loginModal').style.display = 'flex';
        }

        function closeLogin() {
            document.getElementById('loginModal').style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('loginModal');
            if (event.target === modal) {
                closeLogin();
            }
        }

        // Login form handler
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Login functionality will be implemented soon!');
            closeLogin();
        });
    </script>
</body>
</html>
